!function(t){function e(e,n,o){var a=this;return this.on("click.push",e,function(e){var i=t.extend({},h(n,o));i.container||(i.container=t(this).attr("data-push")||a),r(e,i)})}function r(e,r,n){n=h(r,n);var a=e.currentTarget;if("A"!==a.tagName.toUpperCase())throw"$.fn.push or $.push.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==a.protocol||location.hostname!==a.hostname||a.hash&&a.href.replace(a.hash,"")===location.href.replace(location.hash,"")||a.href===location.href+"#")){var i={url:a.href,container:t(a).attr("data-push"),target:a},s=t.extend({},i,n),u=t.Event("push:click");t(a).trigger(u,[s]),u.isDefaultPrevented()||(o(s),e.preventDefault(),t(a).trigger("push:clicked",[s]))}}function n(e,r,n){n=h(r,n);var a=e.currentTarget;if("FORM"!==a.tagName.toUpperCase())throw"$.push.submit requires a form element";var i={type:a.method.toUpperCase(),url:a.action,data:t(a).serializeArray(),container:t(a).attr("data-push"),target:a};o(t.extend({},i,n)),e.preventDefault()}function o(e){function r(e,r){var o=t.Event(e,{relatedTarget:n});return s.trigger(o,r),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,o.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,a=p(e.url).hash,s=e.context=f(e.container);e.data||(e.data={}),e.data._push=s.selector;var u;e.beforeSend=function(t,n){return"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-push","true"),t.setRequestHeader("X-push-Container",s.selector),r("push:beforeSend",[t,n])?(n.timeout>0&&(u=setTimeout(function(){r("push:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),e.requestUrl=p(n.url).href,void 0):!1},e.complete=function(t,n){u&&clearTimeout(u),r("push:complete",[t,n,e]),r("push:end",[t,e])},e.error=function(t,n,o){var a=v("",t,e),s=r("push:error",[t,n,o,e]);"GET"==e.type&&"abort"!==n&&s&&i(a.url)},e.success=function(n,u,l){var h="function"==typeof t.push.defaults.version?t.push.defaults.version():t.push.defaults.version,f=l.getResponseHeader("X-push-Version"),d=v(n,l,e);if(h&&f&&h!==f)return i(d.url),void 0;if(!d.contents)return i(d.url),void 0;o.state={id:e.id||c(),url:d.url,title:d.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(o.state,d.title,d.url),document.activeElement.blur(),d.title&&(document.title=d.title),s.html(d.contents);var m=s.find("input[autofocus], textarea[autofocus]").last()[0];if(m&&document.activeElement!==m&&m.focus(),g(d.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==a){var w=p(d.url);w.hash=a,o.state.url=w.href,window.history.replaceState(o.state,d.title,w.href);var y=t(w.hash);y.length&&t(window).scrollTop(y.offset().top)}r("push:success",[n,u,l,e])},o.state||(o.state={id:c(),url:window.location.href,title:document.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(o.state,document.title));var h=o.xhr;h&&h.readyState<4&&(h.onreadystatechange=t.noop,h.abort()),o.options=e;var h=o.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(w(o.state.id,s.clone().contents()),window.history.pushState(null,"",l(e.requestUrl))),r("push:start",[h,e]),r("push:send",[h,e])),o.xhr}function a(e,r){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return o(t.extend(n,h(e,r)))}function i(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function s(e){var r=e.state;if(r&&r.container){if(x&&E==r.url)return;if(o.state.id===r.id)return;var n=t(r.container);if(n.length){var a,s=C[r.id];o.state&&(a=o.state.id<r.id?"forward":"back",y(a,o.state.id,n.clone().contents()));var u=t.Event("push:popstate",{state:r,direction:a});n.trigger(u);var c={id:r.id,url:r.url,container:n,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1};s?(n.trigger("push:start",[null,c]),r.title&&(document.title=r.title),n.html(s),o.state=r,n.trigger("push:end",[null,c])):o(c),n[0].offsetHeight}else i(location.href)}x=!1}function u(e){var r=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",o=t("<form>",{method:"GET"===n?"GET":"POST",action:r,style:"display:none"});"GET"!==n&&"POST"!==n&&o.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var a=e.data;if("string"==typeof a)t.each(a.split("&"),function(e,r){var n=r.split("=");o.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof a)for(key in a)o.append(t("<input>",{type:"hidden",name:key,value:a[key]}));t(document.body).append(o),o.submit()}function c(){return(new Date).getTime()}function l(t){return t.replace(/\?_push=[^&]+&?/,"?").replace(/_push=[^&]+&?/,"").replace(/[\?&]$/,"")}function p(t){var e=document.createElement("a");return e.href=t,e}function h(e,r){return e&&r?r.container=e:r=t.isPlainObject(e)?e:{container:e},r.container&&(r.container=f(r.container)),r}function f(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for push container!"}throw"no push container for "+e.selector}function d(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function v(e,r,n){var o={};if(o.url=l(r.getResponseHeader("X-push-URL")||n.requestUrl),/<html/i.test(e))var a=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),i=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var a=i=t(m(e));if(0===i.length)return o;if(o.title=d(a,"title").last().text(),n.fragment){if("body"===n.fragment)var s=i;else var s=d(i,n.fragment).first();s.length&&(o.contents=s.contents(),o.title||(o.title=s.attr("title")||s.data("title")))}else/<html/i.test(e)||(o.contents=i);return o.contents&&(o.contents=o.contents.not(function(){return t(this).is("title")}),o.contents.find("title").remove(),o.scripts=d(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=t.trim(o.title)),o}function g(e){if(e){var r=t("script[src]");e.each(function(){var e=this.src,n=r.filter(function(){return this.src===e});if(!n.length){var o=document.createElement("script");o.type=t(this).attr("type"),o.src=t(this).attr("src"),document.head.appendChild(o)}})}}function w(t,e){for(C[t]=e,q.push(t);U.length;)delete C[U.shift()];for(;q.length>o.defaults.maxCacheLength;)delete C[q.shift()]}function y(t,e,r){var n,o;C[e]=r,"forward"===t?(n=q,o=U):(n=U,o=q),n.push(e),(e=o.pop())&&delete C[e]}function b(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-push-VERSION"===e.toUpperCase()}).attr("content")}function T(){t.fn.push=e,t.push=o,t.push.enable=t.noop,t.push.disable=S,t.push.click=r,t.push.submit=n,t.push.reload=a,t.push.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:b},t(window).on("popstate.push",s)}function S(){t.fn.push=function(){return this},t.push=u,t.push.enable=T,t.push.disable=t.noop,t.push.click=t.noop,t.push.submit=t.noop,t.push.reload=function(){window.location.reload()},t(window).off("popstate.push",s)}var x=!0,E=window.location.href,k=window.history.state;k&&k.container&&(o.state=k),"state"in window.history&&(x=!1);var C={},U=[],q=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.push=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.push?T():S()}(jQuery);